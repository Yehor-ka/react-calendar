{"version":3,"sources":["components/SaveDialog.jsx","components/FullCalendar.jsx","App.js","index.js"],"names":["SaveDialog","eventOpenNow","dateClickItem","isOpen","onClose","handleAddEvent","isOpenEdit","onCloseEdit","setEventInfo","eventsInfo","isWholeDay","setIsWholeDay","React","useState","title","date","allDay","time","description","backgroundColor","newEvent","setNewEvent","isTitleError","setIsTitleError","console","log","handleClose","onChange","e","name","target","value","length","prevState","Dialog","open","IconButton","onClick","style","position","top","right","DialogContent","marginTop","TextField","label","fullWidth","defaultValue","type","InputLabelProps","shrink","FormControl","width","InputLabel","htmlFor","Select","native","inputProps","id","step","DialogActions","Button","eventClick","event","remove","newEvents","filter","removedEvent","Number","handleRemoveEvent","editedEvents","map","editedEvent","start","Date","disabled","EventCalendar","JSON","parse","localStorage","getItem","isOpenDialog","setIsOpenDialog","setIsOpenEdit","setEventOpenNow","setDateClickItem","eventId","setEventId","useEffect","setItem","stringify","initialView","headerToolbar","left","center","editable","droppable","plugins","dayGridPlugin","timeGridPlugin","interactionPlugin","events","dateClick","dateClickInfo","dateStr","slice","timeDate","startStr","_def","extendedProps","eventDrop","newDate","dateEvent","day","String","getDate","month","getMonth","getFullYear","structureDate","_instance","range","dragAndDropEvent","calendarEvents","dateId","item","getDropEvent","publicId","OtherEvents","addedEvent","allDayEvent","alert","App","Container","maxWidth","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f6dd486e.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Button, Dialog, DialogActions, DialogContent, TextField } from '@material-ui/core';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\nimport { IconButton } from '@material-ui/core';\r\n\r\nfunction SaveDialog({\r\n  eventOpenNow,\r\n  dateClickItem,\r\n  isOpen,\r\n  onClose,\r\n  handleAddEvent,\r\n  isOpenEdit,\r\n  onCloseEdit,\r\n  setEventInfo,\r\n  eventsInfo,\r\n  isWholeDay,\r\n  setIsWholeDay,\r\n}) {\r\n  const [newEvent, setNewEvent] = React.useState({\r\n    title: '',\r\n    date: dateClickItem,\r\n    allDay: true,\r\n    time: '08:30',\r\n    description: '',\r\n    backgroundColor: '',\r\n  });\r\n  const [isTitleError, setIsTitleError] = React.useState(true);\r\n  //const [isWholeDay, setIsWholeDay] = React.useState(true);\r\n  console.log(newEvent);\r\n\r\n  const handleClose = () => {\r\n    setNewEvent({\r\n      title: '',\r\n      date: '',\r\n      allDay: isWholeDay,\r\n      time: '08:00',\r\n      description: '',\r\n      backgroundColor: '',\r\n    });\r\n    setIsWholeDay(true);\r\n    setIsTitleError(true);\r\n    onClose(false);\r\n    onCloseEdit(false);\r\n  };\r\n\r\n  const handleRemoveEvent = (id) => {\r\n    eventOpenNow.eventClick.event.remove();\r\n    const newEvents = eventsInfo.filter((removedEvent) => Number(removedEvent.id) !== Number(id));\r\n    setEventInfo(newEvents);\r\n    setIsTitleError(true);\r\n    onCloseEdit(false);\r\n  };\r\n\r\n  //console.log('new event', newEvent);\r\n  //console.log('open now event', eventOpenNow);\r\n\r\n  const handleEditEvent = () => {\r\n    console.log(eventOpenNow.time, newEvent.time);\r\n    const editedEvents = eventsInfo.map((editedEvent) => {\r\n      if (Number(editedEvent.id) === Number(eventOpenNow.id)) {\r\n        return {\r\n          title: newEvent.title || eventOpenNow.title,\r\n          date: newEvent.date || eventOpenNow.date,\r\n          backgroundColor: newEvent.backgroundColor || eventOpenNow.backgroundColor,\r\n          allDay: isWholeDay, //newEvent.allDay,\r\n          time: newEvent.time || eventOpenNow.time,\r\n          start: new Date(`${ newEvent.date ||eventOpenNow.date} ${newEvent.time}`),\r\n          description: newEvent.description || eventOpenNow.description,\r\n          id: Number(eventOpenNow.id),\r\n        };\r\n      }\r\n      return editedEvent;\r\n    });\r\n    setEventInfo(editedEvents);\r\n    onCloseEdit(false);\r\n    setNewEvent({\r\n      title: '',\r\n      date: '',\r\n      allDay: isWholeDay,\r\n      time: '08:00',\r\n      description: '',\r\n      backgroundColor: '',\r\n    });\r\n    setIsWholeDay(true);\r\n    setIsTitleError(true);\r\n  };\r\n\r\n  const addEventToCalendar = () => {\r\n    handleAddEvent(newEvent);\r\n    setNewEvent({\r\n      title: '',\r\n      date: '',\r\n      allDay: 'true',\r\n      description: '',\r\n      time: '08:00',\r\n      backgroundColor: '',\r\n    });\r\n    setIsWholeDay(true);\r\n    setIsTitleError(true);\r\n    onClose(false);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    //console.log(name, typeof value);\r\n    if (name === 'allDay' && (value === 'true' || value === true)) {\r\n      setIsWholeDay(true);\r\n    } else if (name === 'allDay' && (value === 'false' || value === false)) {\r\n      setIsWholeDay(false);\r\n    }\r\n    if (name === 'title' && (value === '' || value.length > 30)) {\r\n      setIsTitleError(true);\r\n    } else {\r\n      setIsTitleError(false);\r\n      setNewEvent((prevState) => ({\r\n        ...prevState,\r\n        [name]: value,\r\n      }));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={isOpen || isOpenEdit} onClose={handleClose}>\r\n      <IconButton\r\n        onClick={handleClose}\r\n        style={{ position: 'absolute', top: '5px', right: '5px' }}\r\n        aria-label=\"delete\">\r\n        <CancelIcon />\r\n      </IconButton>\r\n      <DialogContent style={{ marginTop: '25px' }}>\r\n        <TextField\r\n          name=\"title\"\r\n          label=\"event name\"\r\n          fullWidth\r\n          onChange={onChange}\r\n          defaultValue={isOpenEdit ? eventOpenNow.title : ''}\r\n        />\r\n        <TextField\r\n          onChange={onChange}\r\n          name=\"date\"\r\n          label=\"event date\"\r\n          type=\"date\"\r\n          defaultValue={isOpenEdit ? eventOpenNow.date : ''}\r\n          fullWidth\r\n          InputLabelProps={{\r\n            shrink: true,\r\n          }}\r\n        />\r\n        <FormControl style={{ width: '100%' }}>\r\n          <InputLabel htmlFor=\"age-native-simple\">event time</InputLabel>\r\n          <Select\r\n            native\r\n            defaultValue={isOpenEdit ? eventOpenNow.allDay : true}\r\n            onChange={onChange}\r\n            inputProps={{\r\n              name: 'allDay',\r\n              id: 'age-native-simple',\r\n            }}>\r\n            <option value={true}>Весь день</option>\r\n            <option value={false}>Определенное время</option>\r\n          </Select>\r\n        </FormControl>\r\n        {!isWholeDay ? (\r\n          <TextField\r\n            onChange={onChange}\r\n            label=\"event time\"\r\n            type=\"time\"\r\n            name=\"time\"\r\n            defaultValue={\r\n              isOpenEdit ? eventOpenNow.time : '08:30'\r\n            } /* {isOpenEdit ? eventOpenNow.time : \"08:30\"} */\r\n            fullWidth\r\n            InputLabelProps={{\r\n              shrink: true,\r\n            }}\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n          />\r\n        ) : null}\r\n        <TextField\r\n          onChange={onChange}\r\n          defaultValue={isOpenEdit ? eventOpenNow.description : ''}\r\n          name=\"description\"\r\n          label=\"notes\"\r\n          fullWidth\r\n        />\r\n        <FormControl style={{ width: '100%' }}>\r\n          <InputLabel htmlFor=\"age-native-simple\">event color</InputLabel>\r\n          <Select\r\n            native\r\n            defaultValue={isOpenEdit ? eventOpenNow.backgroundColor : ''}\r\n            onChange={onChange}\r\n            inputProps={{\r\n              name: 'backgroundColor',\r\n              id: 'age-native-simple',\r\n            }}>\r\n            <option aria-label=\"None\" value=\"\" />\r\n            <option value=\"red\">Red</option>\r\n            <option value=\"green\">Green</option>\r\n            <option value=\"blue\">Blue</option>\r\n            <option value=\"orange\">Orange</option>\r\n          </Select>\r\n        </FormControl>\r\n        <DialogActions>\r\n          {!isOpenEdit ? (\r\n            <>\r\n              <Button onClick={handleClose}>Cancel</Button>\r\n              <Button onClick={addEventToCalendar} disabled={isTitleError}>\r\n                Save\r\n              </Button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <Button onClick={() => handleRemoveEvent(eventOpenNow.eventClick.event.id)}>\r\n                Remove\r\n              </Button>\r\n              <Button onClick={handleEditEvent} disabled={isTitleError}>\r\n                Edit\r\n              </Button>\r\n            </>\r\n          )}\r\n        </DialogActions>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default SaveDialog;\r\n","import React from 'react';\r\nimport FullCalendar from '@fullcalendar/react';\r\nimport dayGridPlugin from '@fullcalendar/daygrid';\r\nimport interactionPlugin from '@fullcalendar/interaction';\r\nimport timeGridPlugin from '@fullcalendar/timegrid';\r\nimport SaveDialog from './SaveDialog';\r\n\r\nconst getDropEvent = (calendarEvents, dateId) => {\r\n  for (let item = 0; item < calendarEvents.length; item++) {\r\n    if (Number(calendarEvents[item].id) === Number(dateId)) {\r\n      return calendarEvents[item];\r\n    }\r\n  }\r\n};\r\n\r\nconst structureDate = (dateEvent) => {\r\n  const day =\r\n    String(dateEvent.getDate()).length === 1\r\n      ? '0' + String(dateEvent.getDate())\r\n      : dateEvent.getDate();\r\n  const month =\r\n    String(dateEvent.getMonth()).length === 1\r\n      ? '0' + String(dateEvent.getMonth() + 1)\r\n      : dateEvent.getMonth() + 1;\r\n  const year = dateEvent.getFullYear();\r\n  const newDate = year + '-' + month + '-' + day;\r\n  return newDate;\r\n};\r\n\r\nfunction EventCalendar() {\r\n  const [eventsInfo, setEventInfo] = React.useState(\r\n    JSON.parse(localStorage.getItem('events')) || [],\r\n  );\r\n  const [isOpenDialog, setIsOpenDialog] = React.useState(false);\r\n  const [isOpenEdit, setIsOpenEdit] = React.useState(false);\r\n  const [isWholeDay, setIsWholeDay] = React.useState(true);\r\n  const [eventOpenNow, setEventOpenNow] = React.useState({});\r\n  const [dateClickItem, setDateClickItem] = React.useState('');\r\n  const [eventId, setEventId] = React.useState(Number(localStorage.getItem('eventId')) || 0);\r\n  React.useEffect(() => {\r\n    localStorage.setItem('eventId', eventId);\r\n  }, [eventId]);\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem('events', JSON.stringify(eventsInfo));\r\n  }, [eventsInfo]);\r\n\r\n  const handleAddEvent = (addedEvent) => {\r\n    if (addedEvent.date !== '') {\r\n      const allDayEvent = addedEvent.allDay === 'true' || addedEvent.allDay === true ? true : false;\r\n      console.log(allDayEvent);\r\n      setEventId((prevState) => prevState + 1);\r\n      setEventInfo((prevState) => [\r\n        ...prevState,\r\n        {\r\n          ...addedEvent,\r\n          id: eventId,\r\n          allDay: allDayEvent,\r\n          start: new Date(`${addedEvent.date}T${addedEvent.time}:00`),\r\n          /* start: new Date(`${prevState.date} ${prevState.time}`) , */\r\n        },\r\n      ]);\r\n    } else {\r\n      alert('Пожалуйста укажите дату');\r\n    }\r\n  };\r\n  //console.log(eventsInfo);\r\n\r\n  const handleDateClick = (dateClickInfo) => {\r\n    /*dateClickInfo.date = new Date('2021-08-06');*/\r\n    //console.log(dateClickInfo.view.currentStart);\r\n    setDateClickItem(dateClickInfo.dateStr);\r\n    setIsOpenDialog(true);\r\n  };\r\n\r\n  const handleDrop = (date) => {\r\n    const dateEvent = new Date(date.event._instance.range.start);\r\n    const newDate = structureDate(dateEvent);\r\n    console.log(newDate);\r\n    const dragAndDropEvent = getDropEvent(eventsInfo, date.event._def.publicId);\r\n    console.log(dragAndDropEvent);\r\n\r\n    const OtherEvents = eventsInfo.filter(\r\n      (item) => Number(item.id) !== Number(date.event._def.publicId),\r\n    );\r\n    const newEvents = [\r\n      ...OtherEvents,\r\n      {\r\n        ...dragAndDropEvent,\r\n        date: newDate,\r\n        start: new Date(`${newDate}T${dragAndDropEvent.time}:00`),\r\n      },\r\n    ];\r\n    console.log('new events', newEvents);\r\n    setEventInfo(newEvents);\r\n  };\r\n\r\n  const eventEdit = (eventClick) => {\r\n    console.log('start', `${eventClick.event.start}`.slice(16, 21));\r\n    const timeDate = `${eventClick.event.start}`.slice(16, 21);\r\n    setIsWholeDay(eventClick.event.allDay);\r\n    setEventOpenNow({\r\n      title: eventClick.event.title,\r\n      date: eventClick.event.startStr.slice(0, 10),\r\n      allDay: eventClick.event.allDay,\r\n      time: timeDate,\r\n      id: eventClick.event.id,\r\n      description: eventClick.event._def.extendedProps.description,\r\n      backgroundColor: eventClick.event.backgroundColor,\r\n      eventClick,\r\n    });\r\n    setIsOpenEdit(true);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <FullCalendar\r\n        initialView=\"dayGridMonth\"\r\n        headerToolbar={{\r\n          left: 'prev,next today',\r\n          center: 'title',\r\n          right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek',\r\n        }}\r\n        editable={true}\r\n        droppable={true}\r\n        plugins={[dayGridPlugin, timeGridPlugin, interactionPlugin]}\r\n        events={eventsInfo}\r\n        dateClick={handleDateClick}\r\n        eventClick={eventEdit}\r\n        eventDrop={handleDrop}\r\n      />\r\n      <SaveDialog\r\n        eventsInfo={eventsInfo}\r\n        setEventInfo={setEventInfo}\r\n        eventOpenNow={eventOpenNow}\r\n        isOpenEdit={isOpenEdit}\r\n        onCloseEdit={setIsOpenEdit}\r\n        dateClickItem={dateClickItem}\r\n        isOpen={isOpenDialog}\r\n        onClose={setIsOpenDialog}\r\n        handleAddEvent={handleAddEvent}\r\n        isWholeDay={isWholeDay}\r\n        setIsWholeDay={setIsWholeDay}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventCalendar;\r\n","import React from 'react';\nimport EventCalendar from './components/FullCalendar';\nimport Container from '@material-ui/core/Container';\n\nfunction App() {\n  return (\n    <Container maxWidth=\"lg\">\n      <EventCalendar />\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}